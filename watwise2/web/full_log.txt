2025/10/19 19:13:27 main.go:26: ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
2025/10/19 19:13:27 main.go:27: ‚ïë     üöÄ Wattwise Energy Monitor      ‚ïë
2025/10/19 19:13:27 main.go:28: ‚ïë        v1.0 - IoTDB Enabled         ‚ïë
2025/10/19 19:13:27 main.go:29: ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
2025/10/19 19:13:27 main.go:32: 
üìã Loading configuration...
2025/10/19 19:13:27 main.go:34:    ‚úì Server Port: 8080
2025/10/19 19:13:27 main.go:35:    ‚úì IoTDB: 127.0.0.1:6667
2025/10/19 19:13:27 main.go:36:    ‚úì MQTT Broker: tcp://192.168.1.100:1883
2025/10/19 19:13:27 main.go:39: 
üóÑÔ∏è  Initializing IoTDB...
2025/10/19 19:13:27 iotdb.go:59: ‚ö†Ô∏è Error creating storage group (mungkin sudah ada): error code: 501, message: root.wattwise has already been created as database
2025/10/19 19:13:27 iotdb.go:76: ‚ö†Ô∏è Info creating timeseries: error code: 503, message: Path [root.wattwise.voltage] already exist (mungkin sudah ada)
2025/10/19 19:13:27 iotdb.go:76: ‚ö†Ô∏è Info creating timeseries: error code: 503, message: Path [root.wattwise.current] already exist (mungkin sudah ada)
2025/10/19 19:13:27 iotdb.go:76: ‚ö†Ô∏è Info creating timeseries: error code: 503, message: Path [root.wattwise.power] already exist (mungkin sudah ada)
2025/10/19 19:13:27 iotdb.go:76: ‚ö†Ô∏è Info creating timeseries: error code: 503, message: Path [root.wattwise.energy] already exist (mungkin sudah ada)
2025/10/19 19:13:27 iotdb.go:76: ‚ö†Ô∏è Info creating timeseries: error code: 503, message: Path [root.wattwise.frequency] already exist (mungkin sudah ada)
2025/10/19 19:13:27 iotdb.go:76: ‚ö†Ô∏è Info creating timeseries: error code: 503, message: Path [root.wattwise.power_factor] already exist (mungkin sudah ada)
2025/10/19 19:13:27 iotdb.go:80: ‚úÖ IoTDB schema initialized!
2025/10/19 19:13:27 main.go:47: ‚úÖ IoTDB connected successfully
2025/10/19 19:13:27 main.go:49:    ‚úì Schema initialization completed
2025/10/19 19:13:27 main.go:54: 
üîß Initializing services...
2025/10/19 19:13:27 main.go:56:    ‚úì Energy Service initialized
2025/10/19 19:13:27 main.go:59: 
üì° Initializing MQTT...
2025/10/19 19:13:27 main.go:69:    ‚úì MQTT Broker: tcp://192.168.1.100:1883
2025/10/19 19:13:27 main.go:96:    ‚è≥ Connecting to MQTT broker...
2025/10/19 19:13:27 main.go:99: ‚úÖ MQTT connected successfully
2025/10/19 19:13:27 main.go:107: 
üåê Initializing WebSocket...
2025/10/19 19:13:27 main.go:109:    ‚úì WebSocket handler initialized
2025/10/19 19:13:27 main.go:112: 
üì• Initializing MQTT Subscriber...
2025/10/19 19:13:27 subscriber.go:39: ‚úÖ WebSocket broadcaster connected to MQTT subscriber
2025/10/19 19:13:27 main.go:115:    ‚úì Subscriber initialized
2025/10/19 19:13:27 main.go:116:    ‚úì WebSocket broadcaster connected
2025/10/19 19:13:27 main.go:120: 
üîî Subscribing to MQTT topics...
2025/10/19 19:13:27 main.go:80: ‚úÖ MQTT: Connected to broker
2025/10/19 19:13:27 subscriber.go:56: üîî Attempting to subscribe to topic: test
2025/10/19 19:13:27 subscriber.go:64: ‚úÖ Successfully subscribed to: test
2025/10/19 19:13:27 subscriber.go:56: üîî Attempting to subscribe to topic: wattwise/energy/+
2025/10/19 19:13:27 subscriber.go:64: ‚úÖ Successfully subscribed to: wattwise/energy/+
2025/10/19 19:13:27 main.go:134: ‚úÖ Successfully subscribed to energy topics
2025/10/19 19:13:27 main.go:159: 
üî® Initializing Fiber Framework...
2025/10/19 19:13:27 main.go:177:    ‚úì Middleware configured
2025/10/19 19:13:27 main.go:180: 
üìÇ Setting up static files...
2025/10/19 19:13:27 main.go:191:    ‚úì View path: /mnt/c/Users/fachry/Documents/wattwise/web/view
2025/10/19 19:13:27 main.go:196:    ‚úì API routes configured
2025/10/19 19:13:27 main.go:202:    ‚úì Static files configured
2025/10/19 19:13:27 main.go:222:    ‚úì Health check endpoint available at /health
2025/10/19 19:13:27 main.go:225: 
üõ°Ô∏è  Setting up graceful shutdown...
2025/10/19 19:13:27 main.go:246: 
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025/10/19 19:13:27 main.go:247: ‚úÖ Server starting: http://localhost:8080
2025/10/19 19:13:27 main.go:248: ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025/10/19 19:13:27 main.go:249: 
üìù Available endpoints:
2025/10/19 19:13:27 main.go:250:    ‚Ä¢ Web UI: http://localhost:8080/view/login.html
2025/10/19 19:13:27 main.go:251:    ‚Ä¢ API Health: http://localhost:8080/health
2025/10/19 19:13:27 main.go:252:    ‚Ä¢ WebSocket: ws://localhost:8080/ws
2025/10/19 19:13:27 main.go:253:    ‚Ä¢ API Docs: http://localhost:8080/api/
2025/10/19 19:13:27 main.go:254: 
üîê Default credentials:
2025/10/19 19:13:27 main.go:255:    ‚Ä¢ Username: admin
2025/10/19 19:13:27 main.go:256:    ‚Ä¢ Password: admin123
2025/10/19 19:13:27 main.go:257: 
üìä Status:
2025/10/19 19:13:27 main.go:258:    ‚Ä¢ IoTDB: true
2025/10/19 19:13:27 main.go:259:    ‚Ä¢ MQTT: true
2025/10/19 19:13:27 main.go:260: 
‚èπÔ∏è  Press Ctrl+C to stop the server


 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê 
 ‚îÇ                   Wattwise v1.0                   ‚îÇ 
 ‚îÇ                   Fiber v2.52.0                   ‚îÇ 
 ‚îÇ               http://127.0.0.1:8080               ‚îÇ 
 ‚îÇ       (bound on host 0.0.0.0 and port 8080)       ‚îÇ 
 ‚îÇ                                                   ‚îÇ 
 ‚îÇ Handlers ............ 40  Processes ........... 1 ‚îÇ 
 ‚îÇ Prefork ....... Disabled  PID .............. 3560 ‚îÇ 
 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò 

2025/10/19 19:13:32 subscriber.go:76: üì® Received MQTT message on topic: test
2025/10/19 19:13:32 energy_service.go:62: üíæ Saving energy data for device: ESP32_PZEM
2025/10/19 19:13:32 iotdb.go:188: ‚úÖ Inserted to IoTDB: V=198.20V I=0.170A P=32.70W E=0.03000kWh T=1760876012096
2025/10/19 19:13:32 subscriber.go:178: üìä Device status updated: ESP32_PZEM -> online
2025/10/19 19:13:32 subscriber.go:116: ‚ö†Ô∏è ALERT: voltage_abnormal - Voltage abnormal: 198.20V
2025/10/19 19:13:32 websocket_handler.go:97: ‚ö†Ô∏è No WebSocket clients connected, skipping broadcast
2025/10/19 19:13:32 subscriber.go:145: ‚úÖ Successfully processed: ESP32_PZEM | 198.2V | 0.17A | 32.7W | 0.030kWh
